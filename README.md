# OptiCIF: Global optimization of CIF specifications in Python 

OptiCIF is a Python package for performing global optimization on [CIF](https://eclipse.dev/escet/cif/) specifications
by reordering explicit plant automaton declarations according to a provided input sequence. Global optimization is
formally defined in
Reijnen ([2020](https://www.persistent-identifier.nl/urn:nbn:nl:ui:25-115168de-878f-4f5f-9c55-126f20f845fe)). It
integrates in
the [synthesis-based engineering](https://www.eclipse.org/escet/cif/synthesis-based-engineering/approaches/synthesis-based-engineering.html)
development process. This package was developed as part of a bachelor thesis at the Eindhoven University of Technology.

Modules:

- `csv_utils`: Utility functions for working with CSV files. Used to handle input sequences from other tools, see [Usage](#usage) for more details.
- `validators`: Functions for validating the structure and grouping of CSV files containing node sequences, and the structure of binary DSM matrices.
- `cif_transformer`: Function for performing global optimization by reordering explicit plant automaton declarations. Automatons part of a feedback loop are grouped.

## Installation

To use OptiCIF, clone the repository:

```bash
git clone https://github.com/jdelagedavies/opticif.git
```

The project is managed using Poetry. Ensure that you
have [Poetry installed](https://python-poetry.org/docs/#installation) and then install the dependencies:

```bash
cd opticif
poetry install
```

Alternatively, install the dependencies manually. You can find the list of dependencies in the `pyproject.toml` file,
under the `[tool.poetry.dependencies]` section.

## Usage

OptiCIF can be used as a standalone tool for global optimization on CIF specifications. It also offers seamless
integration with input sequences generated by the [RaGraph package](https://ragraph.ratio-case.nl/) and the MATLAB
sequencing script developed by de
Jong ([2019](https://research.tue.nl/en/studentTheses/9bcf3b6d-18e5-4c3e-8c89-2e9ebe64dec0)).

Here's a basic example of using OptiCIF to perform global optimization on a CIF specification:

```python
from opticif import do_global_optimization

# Define input files
cif_path = "path/to/your/cif/specification.cif" # CIF file containing the plant model
csv_path = "path/to/your/sequence.csv"  # CSV file containing the node sequence

# Perform global optimization
do_global_optimization(csv_path, cif_path)
```

The input CSV file should have a "name" column header. If a "labels" column is present, nodes that have a label will be grouped
accordingly in the output CIF file. Ensure that the CSV file's node names match those in your CIF
specification.

For instance:

```csv
name,labels
a,
b,
c,partition1
d,partition1
e,
f,partition2
```

This tool neither supports instantiations nor groups in the CIF plant model,
see [CIF to CIF transformer](https://www.eclipse.org/escet/cif/tools/cif2cif/) for information on how to eliminate them
as a preprocessing step.

Example CIF models and corresponding input files can be found in the repository's `tests/models` directory. For more
advanced usage, see the test scripts provided in the repository.

For detailed information on the functions and their parameters, refer to the function documentation (docstrings) in the
source code.

## License

[MIT](LICENSE)
